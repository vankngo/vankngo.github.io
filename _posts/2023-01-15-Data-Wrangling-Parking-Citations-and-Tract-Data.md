---
layout: post
title: Data Wrangling - SF Parking Citations and Tract Data
subtitle: SJSU Math 167PS Project Spring 2022
driveId: 1LFEUbj7JBo9hgkonRnck36-ZzqY99u5Q/preview
tags: [data wrangling, google collab, python, powerpoint]
---
[Project Code (Python)](code/SF parking citation/Final_Draft_Project_Code.ipynb)

{% include googleDrivePlayer.html id=page.driveId %}

## Background:

Every year, the business of parking citations in major metropolitan cities across America grosses hundreds of millions of dollars in revenue. The City of San Francisco, California earns the second highest spot in revenue per capita approximated at $98.80 in 2017(2). Chicago was ranked 4th in revenue, however, the city received some criticism after leasing its parking meter business to private enterprises in 2008(1). On which, several research papers point to a stark disparity of citation frequency across neighborhoods of differing minority and income demographics(3). With this in mind, it begs the question on whether citation practices remain ethical in San Francisco. We look into a 2018 public dataset on citations drawn to investigate any signs of high citation frequency and revenue within Minority and Low-income blocks, also known as ‘Tracts’. 

## Introduction/Datasets Description::

The analysis focuses on investigating the frequency of parking citations in San Francisco and its potential correlation with the demographics of the neighborhoods where the citations are issued. The San Francisco Citations dataset, containing over 1 million rows of citation data, was used to determine the violation description, vehicle plate state, fine amount, and geographical coordinates of each citation. The citations were then matched with their respective neighborhoods using the Tract Coordinates dataset, and the Tract Demographics dataset was used to gain insights into the population demographic of each neighborhood.

The analysis involved merging the three datasets, resulting in a table with 959,056 citations and 11 variable columns. The variables were grouped and analyzed by Tract Code, Income Level Class, and Violation Type to determine any significant relationships and trends. The approach involved looking at the general distribution of each variable, establishing response variables that measure citation behavior, and conducting preliminary analyses between variable pairings to determine citation behavior. Relevant associations were further analyzed within each income class and between the four income classes to investigate citation behavior across particular violation types. 

## Results of Tract Grouped Dataset:

The dataset was processed by grouping all columns by tract code and averaging them. An additional count column was generated by aggregating the number of citations for each tract code, and this allowed for the calculation of revenue per capita by dividing the average fine amount by the average population. The average revenue per capita for San Francisco City was $120.80. 
Figure 1 shows the distribution of variables, segmented by class, and it demonstrates how the upper income class has the highest median income but the lowest percentage of minority population in its tracts, with a wider range of owner and family units occupied. Surprisingly, despite having a higher median income, the median citation counts, and average revenue/fine amount fall in line or even slightly below other classes. 


| ![Fig1.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig1.png?raw=true) | 
|:--:| 
| *Fig 1: Boxplots of Tract Averages by Income Level* |

Figure 2 confirms a positive relationship between citation frequency and generated revenue, while Figure 3 shows that the average fine amount increases at a steeper rate than revenue. 

  
| ![Fig2.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig2.png?raw=true) | 
|:--:| 
| *Fig 2: Relationship of Citation Counts and Revenue* |

  
| ![Fig3.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig3.png?raw=true) | 
|:--:| 
| *Fig 3: Revenue per Capita ($) vs Avg Fine Amount* |
 

Since the preliminary findings do not point to any evident disparities between the upper- and lower-class tracts, we further investigated the same interactions we have touched on, specifically between the income classes. 

In figure 6 it appears that the upper class has an increase in citation frequency and revenue as minority population increases, and there is a reversal of associations between the upper and lower classes for average fine amount and population size, which suggests a potential difference in citation value between the two classes. However, there are a few high outlying values which largely determine the slopes of the lines, which would need further testing to determine if they are outliers or high leverage data points and if they are influential. 

| ![Fig6.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig6.png?raw=true) | 
|:--:| 
| *Fig 6: Citation Count and Revenue Across Minority % and Population Size* |

To examine the associations between variables within each class, we plotted the data accordingly. Figure 7 shows a lack of association within the Moderate, Middle, and Lower classes, but a slight upward trend in revenue for the Upper class as income increases. Figure 8 shows a lack of association within both classes for the relationship between income and citation counts, but a positive correlation for the Middle class, raising suspicions of disproportionate citations in these tracts. Figure 9 confirms our suspicions of disparity, with a negative relationship between counts and owner-occupied units in the Middle class, implying that middle class neighborhoods with less home density and higher average income are targeted with citations more.

| ![Fig7.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig7.png?raw=true) | 
|:--:| 
| *Fig 7: Revenue per Capita vs Median Income By Class* |

| ![Fig8.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig8.png?raw=true) | 
|:--:| 
| *Fig 8: Average Median Income vs Citation Counts by Class* |

| ![Fig9.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig9.png?raw=true) | 
|:--:| 
| *Fig 9: Owner Occupied Units vs Counts by Class* |

## Results of Income Class Grouped Dataset::

From Figure 10, we can see the significant difference in average revenue between lower class and others. It doubled the value of average revenue for each middle and moderate class, and around $50 higher than the upper class. Though the average fine amount is similar for all classes, it is still slightly higher in the lower class. 

| ![Fig10.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig10.png?raw=true) | 
|:--:| 
| *Fig 10: Avg Fine Amount and Avg Revenue per class* |

Moreover, Figure 11 shows how despite having the least average population size, the lower class leads in average citation counts. The upper class appears to be the only class with the most consistent and logical citation behavior through the lens of these variables, hinting that citation disparity might exist in San Francisco.

| ![Fig11.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig11.png?raw=true) | 
|:--:| 
| *Fig 11: Avg Population and Avg Citation Counts per class* |

## Results From Violation Type Grouped Dataset:

Figures 6, 10, and 11 support our suspicion of disparity against lower-income neighborhoods regarding average fine amounts, but not in the relationships shown in the scatterplots. To investigate further, we grouped the dataset by Violation Type/Description and computed the average fine amount for each. Figure 14 shows that the lower class is occasionally cited with a higher fine amount for certain violations than the upper class, with differences averaging up to $3.72 more. This suggests that add-on fees for late penalties, etc., may be the cause of the differences in fine amounts.

| ![Fig12.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig1.png?raw=true) | 
|:--:| 
| *Fig 12: Common Lower Class Violation Types* |

| ![Fig13.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig13.png?raw=true) | 
|:--:| 
| *Fig 13: Common Upper Class Violation Types* |


| ![Fig14.png](https://github.com/vankngo/vankngo.github.io/blob/master/assets/portfolio/SF/Fig14.png?raw=true) | 
|:--:| 
| *Fig 14: Violation Type by Fine Collected for Lower and Upper Class* |

## Conslusion:

Initial analysis of the merged citation dataset showed hints of disparity across income classes. While there were no significant associations seen between overall citation behavior and income class, a trend emerged where lower-income areas received higher average fine amounts. 
Further investigation with scatter plots segregated by income class discovered possible increased ticketing frequency in certain middle-class tracts. The lower income class outperformed the upper class in citation frequency by 32%. It was discovered that different income classes are possibly being cited different amounts for the same violations, or more likely, due to add-on late fees. The lower class paid more than the upper class for 46.3% of violation types, while the upper class paid more than the lower class for only 18.3% of types. Regardless, without concrete testing, sampling, and research into other confounding variables influencing citation behavior, we cannot confirm the presence of citation disparity against low-income, minority-based communities solely on this analysis.

## Future Analysis:

We considered using geographical heat maps but due to time constraints, we opted for a more explanatory analysis. Future analyses could account for additional demographic variables such as age, registered businesses, and parking infrastructures. Missing tract data could also be supplemented with demographic details from a single source. More analyses, including time-series and prediction models, could be done. Additionally, researching parking meter business practices and regulations would provide more context for data cleaning and speculation on discrepancies.

